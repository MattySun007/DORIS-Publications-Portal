<!DOCTYPE html>

<html lang="en">

	<head>
        <meta charset="utf-8">
        <meta name="Description" content="Open Data Protal for NYC's Publications">
        <title> {% block title %}{% endblock %} - Government Publications Portal</title>
        <link rel="shortcut icon" type="image/x-icon" href="../static/images/favicon.ico" />
        <link rel="icon" type="image/x-icon" href="../static/images/favicon.ico" />
		<link rel="stylesheet" type="text/css" href="../static/css/bootstrap-select.min.css" />
		<link rel="stylesheet" type="text/css" href="../static/css/bootstrap.css" />
		<link rel="stylesheet" type="text/css" href="../static/css/gpp-style.css" />
	</head>

	<body onload="document.getElementById('main').scrollTop = $.jStorage.get('scrollPosition')">

		<!-- HEADER -->
		<div class="navbar navbar-default navbar-fixed-top" role="navigation" style="min-width: 375px">
			<div class="navbar-header">
				<a class="navbar-brand" href="../index">
					<img src="../static/images/nyc_purple.gif" alt="NYC" style="width: 40px; height: 15px; margin-bottom: 4px">
					Government Publications Portal
				</a>
			</div>
		</div>
		<!-- HEADER -->

		{% block content %}
		{% endblock %}

		<!-- FOOTER -->
		<div class="navbar navbar-default navbar-fixed-bottom" style="min-width: 375px">
			<p class="navbar-text"> &copy; 2014 City of New York </p>
			<ul class="nav navbar-nav navbar-right" style="padding-right: 20px; height: 50px;">
				<li><a href="about">About</a></li>
				<li><a href="http://www.nyc.gov/html/records/html/contact/home.shtml">Contact</a></li>
                <li><a href="https://www.facebook.com/nycrecords" target="_blank"><img src="../static/images/facebook.png" alt="facebook" height="24" width="24"> Like Us! </a></li>
			</ul>
		</div>
		<!-- FOOTER -->

		<!-- JAVASCRIPT -->
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	    <script type="text/javascript" src="../static/js/bootstrap-select.js"></script>
		<script type="text/javascript" src="../static/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="../static/js/jstorage.min.js"></script>
	    <script type="text/javascript">
            function maintainSelect(id, jStoreVar, selectList) {
                if ($.jStorage.get(jStoreVar)) {
                    var agencySel = $.jStorage.get(jStoreVar).join(", ");
                    $(id).next().children('button').attr('title', agencySel);
                    $(id).next().children('button').children('.filter-option').text(agencySel);
                    for (var i = 0; i < $.jStorage.get(jStoreVar).length; i++) {
                        var location = "li[rel='%s']".replace('%s', selectList[$.jStorage.get(jStoreVar)[i]]);
                        $(id).next().children('.dropdown-menu').children('ul').children(location).attr('class', 'selected');
                    }
                }
            }

            function storeFilters() {
                $.jStorage.set('agencyVal', $('#agencies').val());
                $.jStorage.set('categoryVal', $('#categories').val());
                $.jStorage.set('typeVal', $('#types').val());
            }

	        $(window).on('load', function () {
	            $('.selectpicker').selectpicker({
	                'selectedText': 'cat'
	            });

                var agencies = {"Aging": 0, "Buildings": 1, "Campaign Finance": 2, "Children's Services": 3, "City Council": 4, "City Clerk": 5, "City Planning": 6, "Citywide Admin Svcs": 7, "Civilian Complaint": 8, "Comm - Police Corr": 9, "Community Assistance": 10, "Comptroller": 11, "Conflicts of Interest": 12, "Consumer Affairs": 13, "Contracts": 14, "Correction": 15, "Criminal Justice Coordinator": 16, "Cultural Affairs": 17, "DOI - Investigation": 18, "Design/Construction": 19, "Disabilities": 20, "District Atty, NY County": 21, "Districting Commission": 22, "Domestic Violence": 23, "Economic Development": 24, "Education, Dept. of": 25, "Elections, Board of": 26, "Emergency Mgmt.": 27, "Employment": 28, "Empowerment Zone": 29, "Environmental - DEP": 30, "Environmental - OEC": 31, "Environmental - ECB": 32, "Equal Employment": 33, "Film/Theatre": 34, "Finance": 35, "Fire": 36, "FISA": 37, "Health and Mental Hyg.": 38, "HealthStat": 39, "Homeless Services": 40, "Hospitals - HHC": 41, "Housing - HPD": 42, "Human Rights": 43, "Human Rsrcs - HRA": 44, "Immigrant Affairs": 45, "Independent Budget": 46, "Info. Tech. and Telecom.": 47, "Intergovernmental": 48, "International Affairs": 49, "Judiciary Committee": 50, "Juvenile Justice": 51, "Labor Relations": 52, "Landmarks": 53, "Law Department": 54, "Library - Brooklyn": 55, "Library - New York": 56, "Library - Queens": 57, "Loft Board": 58, "Management and Budget": 59, "Mayor": 60, "Metropolitan Transportation Authority": 61, "NYCERS": 62, "Operations": 63, "Parks and Recreation": 64, "Payroll Administration": 65, "Police": 66, "Police Pension Fund": 67, "Probation": 68, "Public Advocate": 69, "Public Health": 70, "Public Housing-NYCHA": 71, "Records": 72, "Rent Guidelines": 73, "Sanitation": 74, "School Construction": 75, "Small Business Svcs": 76, "Sports Commission": 77, "Standards and Appeal": 78, "Tax Appeals Tribunal": 79, "Tax Commission": 80, "Taxi and Limousine": 81, "Transportation": 82, "Trials and Hearings": 83, "Veterans - Military": 84, "Volunteer Center": 85, "Voter Assistance": 86, "Youth & Community": 87};
                var categories = {"Business and Consumers": 0, "Cultural/Entertainment": 1, "Education": 2, "Environment": 3, "Finance and Budget": 4, "Government Policy": 5, "Health": 6, "Housing and Buildings": 7, "Human Services": 8, "Labor Relations": 9, "Public Safety": 10, "Recreation/Parks": 11, "Sanitation": 12, "Technology": 13, "Transportation": 14};
                var types = {"Annual Report": 0, "Audit Report": 1, "Bond Offering - Official Statements": 2, "Budget Report": 3, "Consultant Report": 4, "Guide - Manual": 5, "Hearing - Minutes": 6, "Legislative Document": 7, "Memoranda - Directive": 8, "Press Release": 9, "Serial Publication": 10, "Staff Report": 11, "Report": 12};

                maintainSelect('#agencies', 'agencyVal', agencies);
                maintainSelect('#categories', 'categoryVal', categories);
                maintainSelect('#types', 'typeVal', types);

                //Revert to old code without the maintainSelect() call and only with agencies and see if ticks are still behaving strangely
	        });

            $("#btn[value='Refine Search']").click(storeFilters);

            $("#btn[value='Search']").click(storeFilters);

            $("a[href='../index']").on('click', function() {
                $.jStorage.flush();
            });
	    </script>
	    
	</body>
	
</html>